# Day 3：静态白盒测试

还记得前面学过的，**静态测试**是指测试非运行部分，而**白盒**（又称透明盒）测试是指访问代码，所以很容易得出静态白盒测试的定义。

> **静态白盒测试**是在不执行软件的条件下有条理地仔细审查软件设计、体系结构和代码，从而找出软件缺陷的过程，有时称为**结构化分析**。

进行静态白盒测试有两个好处，一是可以尽早地发现软件缺陷，在开发过程中越早发现软件缺陷所需的解决成本就越低；二是可以为黑盒测试员在进行测试时设计和应用测试用例提供思路。

## 一、正式审查

**正式审查**是进行静态白盒测试的过程，有四个基本要素：

- **确定问题**：审查的目的是为了找出软件的问题，所以全部的批评应该直指代码或设计，而不是其设计实现者，即“对事不对人”，程序员也不应该把对其代码的检查视作对其人格的攻击。
- **遵守规则**：审查要遵守一套固定的规则，规则能让参与者了解自己的角色和目标。
- **准备**：每一个参与者都为审查做准备，需要了解自己的责任和义务，积极参与审查。
- **编写报告**：审查小组必须做出审查结果的书面总结报告，使报告便于开发小组的成员使用。

正式审查包括同事审查、走查和检验。

#### 1. 同事审查

召集小组成员进行初次正式审查**最简单**的方法是通过同事审查的方式，有时也称**伙伴审查**。

同事审查的参与者通常是编写代码或设计体系结构的程序员，以及充当审查者的其他一两个程序员和测试员。同事审查是**非正式**的。

#### 2. 走查

走查是比同事审查更正规化的下一步，走查中编写代码的程序员向五人小组或其他程序员和测试员组成的小组做正式陈述。陈述者逐行或者逐个功能地通读代码，解释代码为什么且如何工作；审查人员聆听陈述，提出有疑义的问题。

#### 3.检验

检验是**最正式**的审查类型，具有高度组织化，要求每一个参与者都接受训练。

检查与同事审查和走查的不同之处在于表达代码的人——**表述者**或者**宣读者**，不是原来的程序员，从而迫使他学习和了解要表述的材料；其余的参与者称为**检验员**，职责是从不同的角度审查代码；有的检验员被同时委任为会议**协调员**和会议**记录员**，确保检查过程遵守规则及审查有效进行。

## 二、编码标准和规范

有些代码虽然可以正常运行，但是编写不符合某种**标准**或**规范**。有三个重要的原因要坚持标准或规范：

- **可靠性**：按照标准或规范编写的代码要更加可靠和安全。
- **可读性/可维护性**：符合标准和规范的代码更易于阅读、理解和维护。
- **移植性**：代码经常需要在不同的硬件中运行，或者使用不同的编译器编译。符合设备标准的代码更容易迁移到另一个平台。

**编码标准和规范示例**

标准由四个主要部分组成：

- **标题**：描述标准包含的主题
- **标准**：描述标准或规范内容，解释哪些允许哪些不允许。
- **解释说明**：给出标准背后的原因，以使程序员理解这为什么这样做是好的编程习惯。
- **示例**：给出如何使用标准的简单程序示例，这不是必须的。

如：

**禁止使用魔法值：**

不允许直接在代码中使用未经解释的常数值，应通过常量来代替，增强代码的可读性和维护性。

## 三、通用代码审查清单

该部分讲述关于静态白盒测试在正式审查中验证软件应该查找的问题。

- **数据引用错误**：数据引用错误是指使用未经正确声明和初始化的变量、常数、数组、字符串或记录而导致的软件缺陷。
- **数据声明错误**：数据声明缺陷产生的原因是不正确地声明或使用变量和常量。
- **计算错误**：计算或运算错误实质上是糟糕的数学问题，计算无法得到预期结果。
- **比较错误**：小于、大于、等于、不等于、真、假。比较和判断错误很可能是由于边界条件问题。
- **控制流程错误**：控制流程错误的原因是编程语言中循环等控制结构未按预期方式工作。它们通常由计算或者比较错误直接或间接造成。
- **子程序参数错误**：子程序参数错误的来源是子程序不正确地传递数据。
- **输入/输出错误**：输入/输出错误包括文件读取、接受键盘或鼠标输入以及向打印机或者屏幕等输出设备写入错误。

## 四、学习心得

今天学习了静态白盒测试的方法，了解了正式审查的几种方法，同时学习了编码标准和规范与通用代码审查清单，虽然我还只是一个学生，可是学习编码标准可以让我养成好的编码习惯，了解通用代码审查清单上的问题也会让我在自己敲代码的时候自觉留意自己是否会出现这样的问题。

